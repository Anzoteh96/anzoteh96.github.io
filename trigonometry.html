<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trigonometry</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <ul class="topnav" id="drops" style="list-style-type:none">
        <!--no bullet-->
        <li>
            <div class="dropdown">
                <a href="index.html">
                    <button class="homeicon">
                        <i class="fa fa-home fa-2x"></i>
                    </button>
                </a>
            </div>
        </li>

        <li>
            <div class="dropdown">
                <a href="mathematics.html">
                    <button class="dropbtn">Mathematics</button>
                </a>
                <div class="dropdown-content">
                    <a href="imo_journey.html">IMO journey</a>
                    <a href="trigonometry.html">Trigonometry</a>
                    <a href="JOM 2013.html">JOM 2013</a>
                    <a href="jom_proposals.html">Problems creation</a>
                    <a href="trainer_diary.html">Trainer's diary</a>
                </div>
            </div>
        </li>
        <li>
            <div class="dropdown">
                <a href="writings.html">
                    <button class="dropbtn">Writings</button>
                </a>
            </div>
        </li>
        <li>
            <div class="dropdown">
                <a href="coding.html" class="dropbtn">
                    <button class="dropbtn">Codings</button>
                </a>
            </div>
        </li>
        <li>
            <div class="dropdown">
                <a href="music.html" class="dropbtn">
                    <button class="dropbtn">Music</button>
                </a>
            </div>
        </li>

    </ul>
    <h1 style="text-align:center; background-color:lightblue">Anzo's Mathematics</h1>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
            src="https://example.com/MathJax.js?config=TeX-AMS_CHTML">
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML'></script>
    <link rel="stylesheet" href="imo_style.css" />
    
    
</head>
<body>
    <div id="line"></div>
    <script src="anzo_jsfn.js"></script>
    <h1>Trigonometry tricks</h1>
    <h2>Background Information</h2>
    <p>
        I discovered the trick of solving geometry problems using trigonometry in November 2011,
        when I started my preparation for IMO 2012 training camps.
        Due to many algebraic identities associated with geometry,
        trigonometry provides us with a hacky way to transform geometry into algebra.
        Thanks to trigonometry (combined with many other tools),
        my skills in geometry improved from not being able to solve geometry problems in the 'easy' category in IMO (Problems 1 or 4)
        to be able to get the 1 <i>gold</i> point on the difficult IMO 2014 Problem 3 (and later complete the solution after the contest).
    </p>
    <h2>High-level concepts</h2>
    <p>
    Most geometry problems are about proving identities.
    Some of them, like determining the ratios between lengths of two lines or areas of two polygons, are more suggestive of using trigonometry.
    Others, as seen in the following, can also be transformed into its algebraic/trigonometric equivalent:
                        <table align="center">
                            <tr>
                                <td>Items to prove</td>
                                <td>Trigonometric equivalent</td>
                                
                            </tr>
                            <tr>
                                <td>Two angles are the equal</td>
                                <td>the sine/cosine of them are equal + they are on the same quadrant</td>
                            </tr>
                            <tr>
                                <td>Three (or more) lines pass through the same point.</td>
                                <td>The trigonometric version of Ceva's ratio is 1. </td>
                            </tr>
                            <tr>
                                <td>Three (or more) points lie on the same line.</td>
                                <td>The Menelaus' ratio is -1.</td>
                            </tr>
                        </table>
                    </p>

                    <h2>Basics*</h2>
                    <p>
                        Note: Those name bolded in italics are unofficial names and are not guaranteed to be well-known.
                        <b>Please verify this in the contest should you decide to use it. </b>
                        <ul>
                            <li>
                                <b>Sine rule. </b> For any triangle $ABC$, $\frac{AB}{AC}=\frac{\sin\angle ACB}{\sin\angle ABC}.$
                            </li>
                            <li>
                                <b>Cosine rule. </b>
                                For a triangle $ABC$, we have $BC^{2}=AB^{2}+CA^{2}-2\cdot AB\cdot CA\cdot\cos\angle BAC$.
                                <br />
                                <b>Corollary. </b>$\cos\angle BAC=\frac{AB^{2}+CA^{2}-BC^{2}}{2\cdot AB\cdot CA}.$
                            </li>
                            <li>
                                <b><i>Dissection of triangle area. </i></b>
                                Let $D$ be a point on $BC$ of $\triangle ABC$. Then $\frac {BD}{DC}=\frac{AB}{AC}\cdot\frac{\sin\angle BAD}{\sin\angle CAD}$.
                                <br />
                                <b>Proof: </b>
                                It is (probably) well-known that $\frac {BD}{DC}=\frac{|\triangle ABD|}{|\triangle ADC|}$, (challenge: prove it yourself!)
                                Now let $|\triangle ABC|$ be the area of $\triangle ABC$. 
                                Also let the perpendicular from points $D$ to lines $AB$ and $AC$ be $E$ and $F$ respectively.
                                Then $\frac {BD}{DC}=\frac{|\triangle ABD|}{|\triangle ADC|}=\dfrac{\frac{1}{2}\cdot AB\cdot DE}{\frac{1}{2}\cdot AC\cdot DF}=\frac{AB\cdot (AD\cdot\sin\angle BAD)}{AC\cdot (AD\cdot\sin\angle CAD)}=\frac{AB}{AC}\cdot\frac{\sin\angle BAD}{\sin\angle CAD}.$
                            </li>
                            <li>
                                Let $ABDC$ be a cyclic quadrilateral. Then $\frac {BD}{DC}=\frac{\sin\angle BAD}{\sin\angle CAD}$.
                                In fact, 
                                chord length=
                                diameter of the circle to which the chord belongs $\times$ sine of the angle subtended by the chord on the arc of the circle 
                                (or angle between the chord and the tangent to the circle at either of the chord's endpoint!)
                                As long as ratio is concerned, the diameter of the circle is not so relevant in our solution compared to the sines.
                            </li>
                            <li>
                                Let $D$ be in the angle domain of $\angle BAC$ of a triangle $BAC$ and let $AD$ intersect $BC$ at $E$.
                                Then $\frac{BE}{EC}=\frac{AB}{AC}\cdot\frac{BD}{CD}\cdot\frac{\sin\angle ABD}{\sin\angle ACD}$. 
                                (See how it is equivalent to the trigo version of Ceva's theorem).
                                <br />
                                <b>Corollary 1. </b> Take $D$ as above. Then $\frac{\sin\angle BAD}{\sin\angle CAD}=\frac{BD}{CD}\cdot\frac{\sin\angle ABD}{\sin\angle ACD}.$
                                <br />
                                <b>Corollary 2. </b> Let $D$ and $E$ be in the angle domain of $\angle BAC$ of a triangle $BAC$. 
                                Then $\frac{\sin\angle BAD}{\sin\angle CAD}=\frac{\sin\angle BAE}{\sin\angle CAE}\iff\angle BAD=\angle BAE$ and $\angle CAD=\angle CAE$.
                                <br />
                                <b>Corollary 3. </b>Denote $D$ and $E$ the same way as we did in corollary 2. 
                                Then $A, D, E$ are collinear iff $\frac{BD\cdot\sin\angle ABD}{CD\cdot\sin\angle ACD}=\frac{BE\cdot\sin\angle ABE}{CE\cdot\sin\angle ACE}$.
                            </li>
                        </ul>
                    </p>

    <h2>Good-To-Know</h2>
    <p>
        Trigonometric identities can be combined with the following identities in solving geometry problems:
        <ul>
            <li>Menelaus' theorem: 
            Given a triangle $ABC$ and let $D$, $E$, $F$ be on lines $BC, CA, AB$, respectively. 
            Then $D,E,F$ are collinear if and only if $\frac{BD}{DC}\cdot\frac{CE}{EA}\cdot\frac{FA}{FB}=-1$, where signed length is taken 
            (by convention, the ratio $\frac{BD}{DC}$ is taken to be positive if $D$ lies on segment $BC$, and negative otherwise). 
            </li>
            <li>
                Ceva's theorem: 
                using the same notation above, $AD, BE, CF$ concurrent if and only if $\frac{BD}{DC}\cdot\frac{CE}{EA}\cdot\frac{FA}{FB}=1$ 
                (again, signed ratio is used).
            </li>
            <li>
                Ceva's theorem (trigonometric version) :
                using the same notation as above, $AD, BE, CF$ concurrent if and only if 
                $\frac{\sin\angle BAD}{\sin\angle CAD}\cdot\frac{\sin\angle CBE}{\sin\angle EBA}\cdot\frac{\sin\angle FCA}{\sin\angle FCB}=1$ 
                (try to imagine how would signed trigonometric ratio here looks like: it is rather important!).
            </li>
            <li>
                Properties of harmonic bundle: 
                assume that $AD, BE, CF$ and let $DE$ intersect $AB$ at $F'$. Then $(F, F'; A, B)$ is harmonic. 
                In other words $(CF, CF'; CA, CB)$ is harmonic pencil. 
            </li>
        </ul>
    </p>
                    <h2>Pitfalls and notes</h2>
                    <p>
                        Although trigonometric bashing gives a shortcut in converting a problem to its easier equivalent form, it is not <i>everything.</i>
                        As shown in some examples below, we need some other observations (possibly using other theorems) to turn a geometry problem into its 'ratio-friendly' form.
                        At other times, trigonometric bashing needs to be combined with other identities in proving even a single auxillary result of a problem.
                        Thus it is <b>necessary</b> to equip yourself with other geometry knowledge, too.
                    </p>

                    <h2> Examples </h2>
                    <p>
                        Note: since this page is mainly about trigonometry, proofs of auxillary results that does not involve trigonometry are omitted (but quoted directly),
                        if they can be eaily verified.
                        <b>Do not do this in any mathematical contest.</b>
                    </p>
                    <p><b> APMO 2017, Problem 2. </b>
                        Let $ABC$ be a triangle with $AB < AC$. 
                        Let $D$ be the intersection point of the internal bisector of angle $BAC$ and the circumcircle of $ABC$. 
                        Let $Z$ be the intersection point of the perpendicular bisector of $AC$ with the external bisector of angle $\angle{BAC}$. 
                        Prove that the midpoint of the segment $AB$ lies on the circumcircle of triangle $ADZ$.
                    </p>
                    <button class="button" onclick="hideandshow(apmo2017q2, apmo2017q2button)" id="apmo2017q2button">Show solution</button>
                    <div class="solution", id="apmo2017q2" style="border: 1px solid black; display: none;">
                        <p>
                            The internal and external angle bisectors are perpendicular to each other (known fact!!!), so $\angle ZAD$ is $90^{\circ}$.
                            This motivates us to think of the <i>Pythagoras' theorem</i>,
                            where $AD^2+AZ^2=DZ^2$.
                            If we can prove that, given $M$ as the midpoint of $A$ we have $ZM^2+MD^2=AD^2+AZ^2$ then we have $ZM^2+MD^2=DZ^2$,
                            which gives $\angle ZMD=90^{\circ}$, and $Z, A, M, D$ concyclic, but how?
                        </p>
                        <p>
                            By cosine rule we have $MZ^2=AM^2+AZ^2-2\cdot AM\cdot AZ\cdot\cos\angle MAZ$,
                            $DM^2=AD^2+AM^2-2\cdot AD\cdot AM\cdot\cos\angle MAD$.
                            Summing these two up gives $AD^2+AZ^2+2AM^2-2AM(AZ\cdot\cos\angle MAZ+AD\cdot\cos\angle MAD)$.
                            A little bit of algebra yields that it is enough to prove that $2AM^2-2AM(AZ\cdot\cos\angle MAZ+AD\cdot\cos\angle MAD)$
                            (you the readers will verify this, not me!).
                            We claim that $AM-AZ\cdot\cos\angle MAZ-AD\cdot\cos\angle MAD=0$ (which will be enough to prove our hypothesis).
                            Now, $\cos\angle MAZ=\cos (90^{\circ}+\frac{1}{2}\angle A)=-\sin\frac{1}{2}\angle A$,
                            and $\cos\angle MAD=\cos\frac{1}{2}\angle A$.
                            So now we need $AM+AZ\cdot\sin\frac{1}{2}\angle A-AD\cdot\cos\frac{1}{2}\angle A=0$.
                            Denote $N$ as midpoint of $AC$, then $AN=AZ\cos\angle ZAN=AZ\sin\angle DAC=AZ\cdot\sin\frac{1}{2}\angle A$.
                            By <i>Ptolemy's theorem, </i> we also have
                            $BD\cdot AC+AB\cdot DC=BC\cdot AD$.
                            In view of the fact that $BD=DC$ and $BC=2DC\cos\angle BCD=2DC\cos\angle BAD=2DC\cos\frac 12\angle A$.
                            This transforms the equality above into:
                            $CD\cdot (AB+AC)=2DC\cos\frac 12\angle A\cdot AD$, i.e.
                            $AB+AC=2AD\cos\frac 12\angle A$.
                            Therefore $AM+AZ\cdot\sin\frac{1}{2}\angle A-AD\cdot\cos\frac{1}{2}\angle A$
                            $=AM+AN-\frac 12(AB+AC)$
                            which is obviously zero (midpoints!!!)
                        </p>
                    </div>

                    <p>
                        <b>IMO 2016, Problem 1. </b>
                        Triangle $BCF$ has a right angle at $B$. 
                        Let $A$ be the point on line $CF$ such that $FA=FB$ and $F$ lies between $A$ and $C$. 
                        Point $D$ is chosen so that $DA=DC$ and $AC$ is the bisector of $\angle{DAB}$. 
                        Point $E$ is chosen so that $EA=ED$ and $AD$ is the bisector of $\angle{EAC}$. 
                        Let $M$ be the midpoint of $CF$. Let $X$ be the point such that $AMXE$ is a parallelogram. 
                        Prove that $BD,FX$ and $ME$ are concurrent.
                    </p>
                    <button class="button" onclick="hideandshow(imo2016q1, imo2016q1button)" id="imo2016q1button">Show solution</button>
                    <div class="solution" , id="imo2016q1" style="border: 1px solid black; display: none;">
                        <p>
                            The fact that $\angle CBF=90^{\circ}$ and $M$ being the midpoint of $CF$ should very well suggest us to draw the circumcircle of $\triangle BCF$. 
                            As it turns out, $D$ and $X$ seems to lie on this circle (and that's almost everything we need). 
                            Now $\angle DCF=\angle DCA=\angle DAC=\angle BAF=\angle ABF=90^{\circ}-\frac 12\angle BFC$. 
                            $DC=DA=\frac{CA}{2\cos\angle DCA}$
                            $=\frac{CF-AF}{2\cos(90^{\circ}-\frac 12\angle BFC)}$
                            $=\frac{CF-BF}{2\sin\frac 12\angle BFC}$
                            $=\frac{CF-CF\cos\angle BFC}{2\sin\frac 12\angle BFC}$
                            $=CF\cdot\frac{1-(1-2\sin ^2\frac 12\angle BFC)}{2\sin\frac 12\angle BFC}$
                            $=CF\cdot\sin \frac 12\angle BFC$
                            $=CF\cdot\cos (90^{\circ}-\frac 12\angle BFC)$
                            $=CF\cdot\cos\angle DCF$.
                            If $D'$ is on ray CD satisfying $\angle CD'F=90^{\circ}$ we have $CD'=CF\cos\angle D'CF=CF\cos\angle DCF=CD$, so
                            $D=D'$ and $D$ lies on the circumcircle of $BCF$. 
                            Moreover, $\angle DFC=90^{\circ}-\angle DCF=\frac 12\angle BFC=\angle BFD$, 
                            so $BD$ and $DC$ subtend the same angle and $BD=DC$. 
                        </p>

                        <p>
                            Now $EA=ED$ and $\angle CAD=\angle EAD$ so $\angle EDA=\angle EAD=\angle CAD$, so $ED\parallel CM$. 
                            With $EX\parallel AM$ we have $E, X, D$ collinear, too. 
                            Moreover, $DE=\frac{DA}{2\cos\angle EDA}$
                            $=\frac{DA}{2\cos\angle CAD}$
                            $=\frac{DC}{2\cos\angle DCA}$
                            $=\frac{CF\cos\angle DCF}{2\cos\angle DCF}$
                            $=\frac{CF}{2}$
                            $=CM$,
                            so $CMED$ is a parallelogram. 
                            Thus $\angle DEM=\angle DCM=\angle DCA=\angle CAD$, meaning that $DEMA$ is an isoceles trapezoid (so $\angle EAM=\angle EDM$). 
                            With $AMXE$ parallelogram we also have $\angle DXM=\angle EXM=angle EAM=\angle EDM=\angle XDM$, so $MX=MD$ and $X$ lies on the circumcircle of $BCF$, too. 
                            With $DX\parallel CF$ we conclude that $DXFC$ is an isoceles trapezoid so $CD=FX$, from previous identity we have $BD=DC$ so $FX=BD$.
                        </p>

                        <p>
                            Finally, we already had $F,E,X$ collinear and $\angle DBA=\angle DBC+\angle CBA$
                            $=\angle DFC+(90^{\circ}-\angle FBA)$
                            $=\angle DFC+(\frac 12\angle BFC)$
                            $=\angle DFC+(\angle DFC)$
                            $=\angle DMC$, 
                            so $B$ lies on the circle containing $D,E,A,M$ too. This means $\angle BED=\angle BMD$, 
                            and since $BD$ and $FX$ subtend the same angle on circle $BCF$ we have 
                            $\angle BMD=\angle FMX=\angle FEX$ (the last equality follows from that $EXFM$ is isoceles trapezoid, hence cyclic). 
                            Therefore, $B, E, F$ are in fact collinear, and $E$ is the intersection of $DX$ and $BF$.
                            Hence $ME$ is the common perpendicular bisector of segments $BX$ and $DF$ (since $BXFD$ is an isoceles trapezoid), 
                            and the intersection of $BD$ and $FX$ will lie on this perpendicular bisector too. $\blacksquare$
                        </p>

                        
                    </div>


                        <p>
                            <b>IMO 2014, Problem 3. </b>
                            Convex quadrilateral $ABCD$ has $\angle ABC = \angle CDA = 90^{\circ}$.
                            Point $H$ is the foot of the perpendicular from $A$ to $BD$.
                            Points $S$ and $T$ lie on sides $AB$ and $AD$, respectively,
                            such that $H$ lies inside triangle $SCT$ and
                            \[ \angle CHS - \angle CSB = 90^{\circ}, \quad \angle THC - \angle DTC = 90^{\circ}. \]
                            Prove that line $BD$ is tangent to the circumcircle of triangle $TSH$.
                        </p>
                        <button class="button" onclick="hideandshow(imo2014q3, imo2014q3button)" id="imo2014q3button">Show solution</button>
                        <div class="solution" , id="imo2014q3" style="border: 1px solid black; display: none;">
                            <p>
                                The goal is to prove that the circumcenter $O$ of $HST$ lies on $AH$ (and the conclusion follows from the fact that $AH$ is perpendicular to $BD$).
                                The first step is to recognize that the fact $\angle CHS - \angle CSB = 90^{\circ}$ implies that the circumcenter $P$ of $\triangle CHS$ lies on line $AB$.
                                Similarly, $\angle THC - \angle DTC = 90^{\circ}$ implies that the circumcenter $Q$ of $\triangle CHT$ lies on line $AD$.
                                Thus $OP$ is the perpendicular bisector of $HS$, and the internal angle bisector of $\angle APH$ (remember that $A,S,P$) are collinear.
                                Similarly $OQ$ is the internal angle bisector of $\angle AQH$.
                                Thus by the angle bisector theorem we only need to prove that $\frac {AP}{PH}=\frac {AQ}{QH}$,
                                or rather $\frac {AP}{AQ}=\frac {HP}{HQ}$.
                                (Now you see the reason to use trigonometric ratio method, don't you?)
                            </p>
                            <p>
                                Let $M$ be the midpoint of $CH$ and $H'$ the foot of perpendicular from $C$ to $BD$.
                                Now $\frac{BH'}{H'D}=\frac{CH'\cot\angle CBD}{CH'\cot\angle CDB}=\frac{\cot (90^{\circ}-\angle DBA)}{\cot (90^{\circ}-\angle BDA)}$
                                $=\frac{\tan \angle DBA}{\tan\angle BDA}$ $=\frac{\cot\angle BDA}{\cot\angle DBA}$
                                $=\frac{AH\cot\angle BDA}{AH\cot\angle DBA}$
                                $=\frac {DH}{BH}$,
                                showing that $H$ and $H'$ are the reflection of each other in segment $BD$.
                                Thus the line from $M$ perpendicular to $BD$ will meet $D$ at its midpoint, and therefore $MB=MD$, or $\angle MDB=\angle MBD$.
                                On the other hand, with $PC=CH$ and $QC=QH$, $PQ$ is the perpendicular bisector of $CH$, so it meets $CH$ at $M$ and is perpendicular to $CH$.
                                Thus $\angle PMC=\angle PBC=\angle QMC=\angle QDC=90^{\circ}$, and both $CPBM$, $CMDQ$ are cyclic.
                            </p>

                            <p>
                                Now we have $\frac {AP}{AQ}=\frac{\sin\angle PQA}{\sin\angle QPA}=\frac{\sin\angle MQA}{\sin\angle MPA}$
                                $=\frac{\sin\angle MCD}{\sin\angle MCB}$
                                $=\frac{\sin\angle HCD}{\sin\angle HCB}$;
                                $\frac {HP}{HQ}=\frac {CP}{CQ}=\frac{\sin\angle CQP}{\sin\angle CPQ}$
                                $=\frac{\sin\angle CQM}{\sin\angle CPM}$
                                $=\frac{\sin\angle CDM}{\sin\angle CBM}$,
                                but by the trigonometric version of Ceva's theorem and the fact that $CH, DM, BM$ concur at $M$ we have
                                $1=\frac{\sin\angle BCM}{\sin\angle DCM}\cdot\frac{\sin\angle CDM}{\sin\angle MDB}\cdot\frac{\sin\angle MBD}{\sin\angle MBC}$
                                $=\frac{\sin\angle BCM}{\sin\angle DCM}\cdot\frac{\sin\angle CDM}{\sin\angle MBC}$,
                                since $\angle MDB=\angle MBD$.
                                Thus $\frac {AP}{AQ}=\frac{\sin\angle MCD}{\sin\angle MCB}$
                                $=\frac{\sin\angle CDM}{\sin\angle MBC}$
                                $=\frac{HP}{HQ}$. Q.E.D.
                            </p>
                        </div>


                        <p>
                            <b>IMOSL 2014, G4. </b>
                            Consider a fixed circle $\Gamma$ with three fixed points $A, B,$ and $C$ on it.
                            Also, let us fix a real number $\lambda \in(0,1)$.
                            For a variable point $P \not\in\{A, B, C\}$ on $\Gamma$, let $M$ be the point on the segment $CP$ such that $CM =\lambda\cdot CP$ .
                            Let $Q$ be the second point of intersection of the circumcircles of the triangles $AMP$ and $BMC$.
                            Prove that as $P$ varies, the point $Q$ lies on a fixed circle.
                        </p>
                        <button class="button" onclick="hideandshow(isl2014g4, isl2014g4button)" id="isl2014g4button">Show solution</button>
                        <div class="solution" , id="isl2014g4" style="border: 1px solid black; display: none;">
                            <p>
                                So many circles! But two of them pass through $C$ so our intuition tells us to invert around $C$ about some radius $r$.
                                Now let $A', P', M', B', Q'$ be the images after the inversion.
                                Then $A', P', B'$ lie on a circle, and $Q'$ is the second intersection of line $B'M'$ and circle $A'P'M'$.
                                Thus we have the relation (power of point from $B$) $B'A'\cdot B'P'=B'M'\cdot B'Q'$.
                                Also the we have $C'P'=\lambda\cdot C'M'$, so $P'M'=\frac{(1-\lambda )}{\lambda }\cdot C'P'$.
                            </p>

                            <p>
                                The notion $\lambda$ already suggests some ratio-hacking; inversion simply makes it clearer on our approach.
                                Recall also the identity $\lambda=\frac{C'P'}{C'M'}=\frac{B'P'\cdot \sin\angle C'B'P'}{B'M'\cdot\sin\angle C'B'M'}$.
                                Therefore $B'Q'=B'A'\cdot\frac{B'P'}{B'M'}$
                                $=B'A'\cdot\lambda\frac{\sin\angle C'B'M'}{\sin\angle C'B'P'}$
                                $=B'A'\cdot\lambda\frac{\sin\angle C'B'M'}{\sin\angle C'B'A'}$
                                ($B', P', A'$ are collinear).
                                Since $B'A', \lambda, \sin\angle C'B'A'$ are constant, we can treat $B'Q'$ as product of constant and $\sin\angle C'B'M'$.
                                This suggests that the locus of $Q'$ is (possibly just an arc of) a circle tangent to $B'C'$, diameter $\frac{B'A'\cdot\lambda}{\sin\angle C'B'A'}$,
                                and have some intersection with ray $B'A'$.
                            </p>
                        </div>

                        <p>
                            <b>IMOSL 2014, G7. </b>
                            Let $ABC$ be a triangle with circumcircle $\Omega$ and incentre $I$.
                            Let the line passing through $I$ and perpendicular to $CI$ intersect the segment $BC$ and the arc $BC$ (not containing $A$) of $\Omega$ at points $U$ and $V$ , respectively.
                            Let the line passing through $U$ and parallel to $AI$ intersect $AV$ at $X$, and let the line passing through $V$ and parallel to $AI$ intersect $AB$ at $Y$ .
                            Let $W$ and $Z$ be the midpoints of $AX$ and $BC$, respectively.
                            Prove that if the points $I, X,$ and $Y$ are collinear, then the points $I, W ,$ and $Z$ are also collinear.
                        </p>
                        <button class="button" onclick="hideandshow(isl2014g7, isl2014g7button)" id="isl2014g7button">Show solution</button>
                        <div class="solution" , id="isl2014g7" style="border: 1px solid black; display: none;">
                            <p>
                                How can we even find those triangles $ABC$ such that $I, X, Y$ are collinear?
                                Don't panic: the abundance of parallel lines should suggest some sort of equal length ratios,
                                and trigonometric ratio hacks will therefore serve us right.
                            </p>

                            <p>
                                Now let $AB$ and $IV$ intersect at $R$ (possibly at point of infinity: you now see what's coming).
                                From $VY\parallel UX\parallel AI$ we have
                                $\frac{RV}{RI}=\frac{VY}{AI}=\frac{VX}{XA}=\frac{VU}{UI}.$
                                This means $(R, U; V, I)$ are harmonic points and lines $(BR, BU; BV, BI)$ are harmonic pencils, which gives
                                $\frac{\sin\angle RBV}{\sin\angle RBI}=\frac{\sin\angle UBV}{\sin\angle IBU}.$
                                But $\angle RBI$ is either equal or supplemental to $\angle ABI$ (depdning on which side of $AB$ is $R$ located, )
                                so $\sin\angle RBI=\sin\angle ABI=\sin\angle IBC=\sin\angle IBU$ ($BI$ is the internal angle bisector of $\angle ABC$, don't forget! )
                                Hence $\sin\angle ABV=\sin\angle RBV=\sin\angle UBV=\sin\angle CBV$, and therefore $AV=CV$.
                            </p>
                            <p>
                                Let $M$ be the midpoint of arc $AC$ not containing $V$.
                                Then from $AV=CV$ and $AM=CM$ we have $\angle VCM=\angle VAM=90^{\circ}$.
                                Moreover from the property of incenter we hav $MC=MA=MI$.
                                Let $N$ be the midpoint of $VC$, then $NV=NC=NI$ since $\angle VCI=90^{\circ}$ and $N$ is the circumcenter of $VCI$.
                                Hence $NC=NI$, $MC=MI$, $NM$ is the perpendicular bisector of $CI$ and $\angle NIM=\angle NCM=90^{\circ}$.
                                Also we have $\angle VBM=90^{\circ}$, so $VB\parallel NI$.
                                Since $NI$ passes through the midpoint of $VC$ which is $N$, it passes through the midpoint of $BC$, which is $Z$.
                                Thus we only need to prove that $NI$ passes through $W$.
                            </p>

                            <p>
                                Now comes the <i>exciting</i> trigonometric utilization: ratio hacks!
                                Let $W'$ be the intersection of $NI$ and $AV$ and we will show that $W'$ is the midpoint of $AX$, which will yield $W=W'$.
                                Notice that we already had $\angle VIC=\angle VBI=90^{\circ}$,
                                and also $\angle VCI=90^{\circ}-\angle ICM=90^{\circ}-\angle CIM$
                                $=90^{\circ}-(180^{\circ}-90^{\circ}-\angle VIB)$
                                $=\angle VIB$.
                                With the fact $UX\parallel AI$ we have
                                $\frac{XA}{VX}=\frac{UI}{VU}=\frac{|\triangle CIB|}{|\triangle CVB|}$
                                $=\frac{CI\cdot IB\cdot\sin\angle CIB}{VC\cdot VB\cdot\sin\angle CVB}$
                                $=\frac{CI}{VC}\cdot\frac{IB}{VB}\cdot\frac{\sin\angle CIB}{\sin\angle CVB}$
                                $=\cos\angle VCI\cdot\cot\angle VIB\cdot\frac{\sin\angle CIM}{\sin (\angle CVI+\angle IVB)}$
                                $=\cos\angle VCI\cdot\cot\angle VCI\cdot\frac{\sin\angle ICM}{\sin 2\angle CVI}$
                                $=\cos\angle VCI\cdot\frac{\cos\angle VCI}{\sin\angle VCI}\cdot\frac{\cos\angle VCI}{2\sin\angle CVI\cos\angle CVI}$
                                $=\cos\angle VCI\cdot\frac{\cos\angle VCI}{\sin\angle VCI}\cdot\frac{\cos\angle VCI}{2\sin\angle VCI\cos\angle VCI}$
                                $=\frac{\cos^{2}\angle VCI}{2\sin^{2}\angle VCI}$
                                $=\frac 12\cot ^2\angle VCI$
                                $=\frac 12\cot ^2\angle CMN$
                                $=\frac 12(\frac{MC}{CN})^2$
                                $=\frac 12\left(\frac{MC}{\frac 12 CV}\right)^2$
                                $=2\left(\frac{MC}{CV}\right)^2$.
                                On the other hand, $IM=MA$ and the fact that $\angle W'IM=\angle W'AM=90^{\circ}$ suggest that triangles $W'AM$ and $W'IM$ are congruent.
                                Hence $\angle WMI=\angle WMA$, and with $\angle NMC=\angle NMI$ we get
                                $\angle NMW'$
                                $=\angle WMI +\angle NMI$
                                $=\angle WMA+\angle NMC$
                                $=\frac 12 \angle CMA$
                                $=\angle CMV$
                                $=\angle AMV$.
                                Some calculation gives $\angle CMN=\angle VMW'$, $\angle VMN=\angle AMW'$.
                                With the fact $VCM$ and $VAM$ congruent, we know that $MW'$ is the symmedian of triangle $MVA$.
                                Therefore $\frac{AW'}{W'V}=\left(\frac{MA}{MV}\right)^2=\left(\frac{MC}{MV}\right)^2.$
                                Notice, also, that our original $W$ is the midpoint of $AX$, so
                                $\frac{AW}{WV}=\frac{\frac 12 AX}{XV+WX}$
                                $=\frac{\frac 12 AX}{XV+\frac 12 AX}$
                                $=\frac{AX}{2XV+AX}$,
                                but since $\frac{XA}{VX}=2\left(\frac{MC}{CV}\right)^2$ we can simplify $\frac{AX}{2XV+AX}$ into
                                $\frac{2\left(\frac{MC}{CV}\right)^2}{2XV+XV(2\left(\frac{MC}{CV}\right)^2)}$
                                $=\frac{MC^2}{MC^2+CV^2}$
                                $=\frac{MC^2}{MV^2}$,
                                the last equality by Pytagoras' theorem.
                                Thus $\frac{AW'}{W'V}=\frac{AW}{WV}$ and therefore $W'=W$. Q.E.D.
                            </p>
                        </div>
                        
                    <p>
                        <b>IMO 2013, Problem 3. </b>
                        Let the excircle of triangle $ABC$ opposite the vertex $A$ be tangent to the side $BC$ at the point $A_1$. 
                        Define the points $B_1$ on $CA$ and $C_1$ on $AB$ analogously, using the excircles opposite $B$ and $C$, respectively. 
                        Suppose that the circumcentre of triangle $A_1B_1C_1$ lies on the circumcircle of triangle $ABC$. 
                        Prove that triangle $ABC$ is right-angled.
                    </p>
                    <button class="button" onclick="hideandshow(imo2013q3, imo2013q3button)" id="imo2013q3button">Show solution</button>
                    <div class="solution" , id="imo2013q3" style="border: 1px solid black; display: none;">
                        <p>
                            A careful construction will first give an intuition that the converse holds (and it does), 
                            so this should be our starting point.
                        </p>
                        <p>
                            The problem statement implies that triangle $A_1B_1C_1$ is obtuse, 
                            so w.l.o.g. let angle $A_1$ be obtuse. 
                            (on the circumcircle $\Rightarrow$ outside triangle $A_1B_1C_1$). 
                            The circumcenter lies on the perpendicular bisector of $B_1C_1$, 
                            and this perpendicular bisector intersect the circumcircle of triangle $ABC$ at two points: 
                            one on the same side as $A_1$ and the other on the different side as $A_1$. 
                            The former one cannot be a candidate for our circumcenter, so the latter one has to be. 
                        </p>
                        <p>
                            Denote $M$ as the second intersection of the circumcircles of triangles $ABC$ and $AB_1C_1$
                            (with the exception of the case where the two circles are tangent at $A$, which we note $M=A$). 
                            We show that $M$ is the desired circumcenter in this sequel. 
                            By some angle chasing we know that triangles $MB_1C$ and $MC_1B$ are similar. 
                            By the properties of excircle we also have $B_1C=C_1B$, so these triangles are indeed congruent. 
                            These means $MB_1=MC_1$ and $M$ lies on the perpendicular bisector of $B_1C_1$. 
                            With the fact that $M$ is on different side as $A_1$ w.r.t. $B_1C_1$, 
                            we conclude that $M$ is the circumcenter. 
                            In addition, $MC=MB$. so $M$ is on the midpoint of arc $BAC$. 
                        </p>
                        <p>
                            The trigo-heavy part has now begun! 
                            Denote $D$ as the midpoint of $BC$, then 
                            $MD\perp BC$ and thus $MA_1^2=MD^2+DA_1^2$. 
                            Also, $MB_1^2=MC^2+CB_1^2-2\cdot MC\cdot CB_1\cdot\cos MCA$. 
                            Thus from $MA_1=MB_1=MC_1$ we have: 
                            $$MD^2+DA_1^2=MC^2+CB_1^2-2\cdot MC\cdot CB_1\cdot\cos MCA;$$ 
                            Now $MC^2=MD^2+DC^2=MD^2+DA_1^2+(DC^2-DA_1^2)$
                            $=MD^2+DA_1^2+(DC-DA_1)(DC+DA^1)$
                            $=MD^2+DA_1^2+BA_1\cdot CA_1$, 
                            the last equality follows from the fact that $D$ is the midpoint of side $BC$. 
                            Thus we can re-arrange the equation into 
                            $$0=BA_1\cdot CA_1-2\cdot MC\cdot CB_1\cdot\cos MCA. $$
                        </p>
                        <p>
                            We need an auxillary lemma: $2\cdot MC\cos MCA=AB+AC$. 
                            Indeed, let $N$ be diametrically opposite $M$ w.r.t. the circumcircle of $ABC$, 
                            then $N$ is the midpoint of arc $BC$ not containing $A$. 
                            By Ptolemy's theorem we have: 
                            $MB\cdot NC+MC\cdot NB=MN\cdot BC$, or
                            $2MC\cdot NB=MN\cdot BC$ (since $MB=MC, NB=NC$).
                            Multiplying $\cos MCA$ on both sides we have 
                            $2MC\cdot\cos MCA\cdot NB=MN\cdot\cos MCA\cdot BC$
                            $=MN\cdot\cos MNA\cdot BC$
                            $=NA\cdot BC$, 
                            since $\angle MAN=90^{\circ}$. 
                            By Ptolemy's theorem again we have 
                            $NA\cdot BC=NB\cdot AC+NC\cdot AB=NB\cdot (AB+AC)$. 
                            Therefore $AB+AC=2\cdot MC\cos MCA$, as claimed. 
                        </p>
                        <p>
                            Thus getting back to the equation we now have: 
                            $$0=BA_1\cdot CA_1-(AB+AC)\cdot CB_1. $$
                            By property of excircles we can verify that 
                            $CB_1=\frac{AB+AC-BC}{2}$, 
                            $BA_1=\frac{AC+BC-AB}{2}$, 
                            $CA_1=\frac{AB+BC-AC}{2}$. 
                            Now $0=\frac{(AC+BC-AB)(AB+BC-AC)}{4}-\frac{(AB+AC)(AB+AC-BC)}{2}$.
                            It is now easy to verify that the above can be converted into $AB^2+AC^2=BC^2$, 
                            which means that angle $A$ is a right-angle.
                        </p>
                         
                    </div>

                        <p>
                            <b>APMO 2013, Problem 1.* </b>
                            Let $ABC$ be an acute triangle with altitudes $AD, BE$ and $CF$, and let $O$ be the center of its circumcircle.
                            Show that the segments $OA, OF, OB, OD, OC, OE$ dissect the triangle $ABC$ into three pairs of triangles that have equal areas.
                        </p>
                        <button class="button" onclick="hideandshow(apmo2013q1, apmo2013q1button)" id="apmo2013q1button">Show solution</button>
                        <div class="solution" , id="apmo2013q1" style="border: 1px solid black; display: none;">
                            <p>
                                The main obstale from the beginning is to determine which three pairs should have the same area;
                                not anymore when we can calculate their area using trigonometric hacks.
                            </p>
                            <p>
                                <b>Solution 1. </b>
                                The first obstacale is to "pair" the six triangles, so calculate each of them.
                                Let's pick $\triangle BOD$ for now.
                                As we see $|\triangle BOC|$
                                $=\frac{1}{2}\cdot BO\cdot OC\cdot\sin\angle BOC$
                                $=\frac{1}{2}\cdot R^{2}\cdot\sin(2\angle A)$
                                $=R^{2}\cdot\sin\angle A\cos\angle A.$
                                Now $|\triangle BOD|=|\triangle BOC|\cdot\frac{BD}{BC}=|\triangle BOC|\cdot\frac{BD}{BD+DC}.$
                                But $\frac{BD}{DC}=\frac{\sin\angle C\cos\angle B}{\sin\angle B\cos\angle C}$
                                so $\frac{BD}{BC}=\frac{\sin\angle C\cos\angle B}{\sin\angle C\cos\angle B+\sin\angle B\cos\angle C}$
                                $=\frac{\sin\angle C\cos\angle B}{\sin\angle A}$
                                (recall that $\angle B+\angle C$ and $\angle A$ are sumpplementary so the sines of these angles must be the same).
                                Combining above we must have $|\triangle BOD|$
                                $=R^{2}\cdot\cos\angle B\cos\angle A\sin\angle C$. Now you can verify that this is the same for $|\triangle AOE|$ (symmetry says it all!).
                                Repeat the whole process for $\triangle AOB$ and $\triangle AOC$, and summarizing everything above, we will get
                                $|\triangle COD|=|\triangle AOF|=R^{2}\cdot\cos \angle A\cos\angle C\sin\angle B$
                                and $|\triangle BOF|=|\triangle COE|=R^{2}\cdot\cos\angle B\cos\angle C\sin\angle A$. $\blacksquare$
                            </p>
                            <p>
                                <b>Solution 2. </b>
                                Perhaps we have made our pairing conjecture and want to play with ratios (sides and bases).
                                Let's name our orthocentre $H$ and midpoints of $BC, CA, AB$ as $M_A, M_B, M_C$ respectively.
                                Observe that $M_A, M_B, M_C$ are also the perpendicular of $O$ to sides $BC, CA, AB$. (Why?)
                                Now we shall take $\triangle BOD$ and $\triangle AEO$ again,
                                and $\frac{|\triangle BOD|}{|\triangle AEO|}$
                                $=\dfrac{\frac{1}{2}\cdot BD\cdot OM_A}{\frac{1}{2}\cdot CE\cdot OM_B}$.
                                Now $\triangle EHA\sim\triangle DHB$,
                                so $\frac{BD}{EA}=\frac{HB}{HA}$
                                $=\frac{\sin\angle DAB}{\sin\angle EBA}$
                                $=\frac{\cos\angle B}{\cos\angle A}$ while $OM_A=OB\cos BOM_A=R\cos \frac{\angle BOC}{2}=R\cos\angle A$.
                                In a similar manner $OM_B=R\cos\angle B$.
                                So $\frac{|\triangle BOD|}{|\triangle AEO|}$
                                $=\frac{BD\cdot OM_A}{CE\cdot OM_B}$
                                $=\frac{\cos\angle B}{\cos\angle A}\cdot\frac{R\cos\angle A}{R\cos\angle B}=1.$ $\blacksquare$
                            </p>
                        </div>

                        <p>
                            <b>IMOSL 2012, G2. </b>
                            Let $ABCD$ be a cyclic quadrilateral whose diagonals $AC$ and $BD$ meet at $E$.
                            The extensions of the sides $AD$ and $BC$ beyond $A$ and $B$ meet at $F$.
                            Let $G$ be the point such that $ECGD$ is a parallelogram, and let $H$ be the image of $E$ under reflection in $AD$.
                            Prove that $D,H,F,G$ are concyclic.
                        </p>
                        <button class="button" onclick="hideandshow(isl2012g2, isl2012g2button)" id="isl2012g2button">Show Solution</button>
                        <div class="solution" , id="isl2012g2" style="border: 1px solid black; display: none;">
                            <p>
                                We want to prove that $\angle FHD+\angle FGD=180^{\circ}$, or $\angle FED+\angle FGD=180^{\circ}$ since $\angle FHD=\angle FED$.
                                We also have the fact $\angle DEC=\angle DGC$, so we only need the following equivalent statement by the identity above:
                                $\frac{\sin\angle FED}{\sin\angle FEC}=\frac{\sin\angle FGD}{\sin\angle FGC}$.
                                Now $\frac{FD\cdot DE\cdot\sin\angle FDE}{FC\cdot CE\cdot\sin\angle FCE}$
                                $=\frac{|\triangle FDE|}{|\triangle FCE|}$
                                $=\frac{ED\cdot FE\cdot\sin\angle FED}{EC\cdot FE\cdot\sin\angle FEC}$,
                                so with the fact that $\angle FDE=\angle FCE$ we have
                                $\frac{\sin\angle FED}{\sin\angle FEC}$
                                $=\frac{FD}{FC}$.
                                We also have
                                $\frac{FD\cdot DG\cdot\sin\angle FDG}{FC\cdot CG\cdot\sin\angle FCG}$
                                $=\frac{|\triangle FDG|}{|\triangle FCG|}$
                                $=\frac{DG\cdot GF\cdot\sin\angle FGD}{CG\cdot FG\cdot\sin\angle FGC}$,
                                since $\angle FDG=\angle FDE+\angle EDG=\angle FCE+\angle ECG$
                                ($\angle EDG=\angle ECG$ because of the parallelogram property),
                                $\frac{\sin\angle FGD}{\sin\angle FGC}$
                                $=\frac{FD\cdot DG}{FC\cdot CG}\cdot\frac{CG}{DG}$,
                                $=\frac{FD}{FC}$.
                                Hence the two ratios are equal. $\blacksquare$
                            </p>
                        </div>
                        <p>
                            <b>
                                IMOSL 2012, G3.
                            </b>
                            In an acute triangle $ABC$ the points $D,E$ and $F$ are the feet of the altitudes through $A,B$ and $C$ respectively.
                            The incenters of the triangles $AEF$ and $BDF$ are $I_1$ and $I_2$ respectively;
                            the circumcenters of the triangles $ACI_1$ and $BCI_2$ are $O_1$ and $O_2$ respectively.
                            Prove that $I_1I_2$ and $O_1O_2$ are parallel.
                        </p>
                        <button class="button" onclick="hideandshow(isl2012g3, isl2012g3button)" id="isl2012g3button">Show Solution</button>
                        <div class="solution" , id="isl2012g3" style="border: 1px solid black; display: none;">
                            <p>
                                First, $AI_1$ and $BI_2$ intersect at $I$, the incenter of the triangle $ABC$ (don't ask me why, just verify it yourself).
                                Also, it seems like (draw it!) the circumcircles of $ACI_1$ and $BCI_2$ has an intersection on $CI$ besides $C$.
                                Thus we want to prove that $CI$ is the radical axis of the two circles (and this is in fact <i>everything</i>).
                            </p>
                            <p>
                                From the properties of orthocenter and altitude we have triangle $AFE$ and $ACB$ similar to each other with similitude $\frac{AF}{AC}=\cos\angle A$.
                                Similarly triangle $BDF$ and $BAC$ are similar with similitude $\cos\angle B$.
                                The similarity ratio is preserved for incenters too, so $\frac{AI_1}{AI}=\cos\angle A$, $\frac{BI_2}{BI}=\cos\angle B$.
                                And <i>yes</i>! Trig time!
                                $\frac{II_1}{II_2}$
                                $=\frac{IA-I_1A}{IB-I_2B}$
                                $=\frac{IA(1-\cos\angle A)}{IB(1-\cos\angle B)}$.
                                By sine rule on $\triangle IAB$ we also have $\frac{IA}{IB}=\frac{\sin\angle IBA}{\sin\angle IAB}$,
                                so $\frac{II_1}{II_2}$
                                $=\frac{\sin\angle IBA(1-\cos\angle A)}{\sin\angle IAB(1-\cos\angle B)}$
                                $=\frac{\sin\angle IBA(1-\cos 2\angle IAB)}{\sin\angle IAB(1-\cos 2\angle IBA)}$
                                $=\frac{\sin\angle IBA(1-(1-2\sin ^2 \angle IAB))}{\sin\angle IAB(1-(1-2\sin ^2 \angle IBA))}$
                                $=\frac{\sin\angle IBA(2\sin ^2 \angle IAB)}{\sin\angle IAB(2\sin ^2 \angle IBA)}$
                                $=\frac{\sin \angle IAB}{2\sin \angle IBA}$
                                $=\frac{IB}{IA}$,
                                so $IA\cdot II_1=IB\cdot II_2$,
                                meaning that $I$ has equal power from the two circles, hence lie on the radical axis (with $C$).
                                This gives us $O_1O_2\perp CI$, so the last thing we need is to prove that $I_1I_2\perp CI$.
                                By having $I_1ABI_2$ cyclic, this is just a matter of angle chasing and is therefore left as exercise. $\blacksquare$
                            </p>

                        </div>

                        <p>
                            <b>IMOSL 2011, G7. </b>

                            Let $ABCDEF$ be a convex hexagon all of whose sides are tangent to a circle $\omega$ with centre $O$.
                            Suppose that the circumcircle of triangle $ACE$ is concentric with $\omega$.
                            Let $J$ be the foot of the perpendicular from $B$ to $CD$.
                            Suppose that the perpendicular from $B$ to $DF$ intersects the line $EO$ at a point $K$.
                            Let $L$ be the foot of the perpendicular from $K$ to $DE$.
                            Prove that $DJ=DL$.
                        </p>
                        <button class="button" onclick="hideandshow(isl2011g7, isl2011g7button)" id="isl2011g7button">Show solution</button>
                        <div class="solution" id="isl2011g7" style="border: 1px solid black; display: none;">
                            <p>
                                Denote the radius of $\omega$ as $r$.
                                The first thing to recognize is that the internal angle bisectors from all vertices in $ABCDEF$ concur at $O$.
                                Moreover, $A, C, E$ are equidistant from $O$, so $\angle A=2\angle FAO=2\arcsin \frac{r}{AO}=2\arcsin \frac{r}{EO}=2\angle DEO=\angle E$,
                                similarly $\angle E=\angle C$, too.
                                This gives $\angle OED=\frac 12\angle E=\frac 12\angle C=\angle OCD$,
                                and $\angle ODC=\angle ODE$ since $OD$ bisects angle $D$.
                                Thus triangles $ODE$ and $ODC$ are similar: congruent, in fact, since their similarity ratio is $\frac {OD}{OD}=1$.
                                Therefore we have $DE=DC$, and similarly $BA=BC$ and $FA=FE$.
                            </p>

                            <p>
                                In view of this, it is tempting for us to say "it suffices to prove that $CJ$=$EL$" since $DJ=DC+CJ$ and $DL=DE+EL$.
                                However, this may not be good enough: what if $J$ lies on segment $CD$ but $L$ lies on ray $DE$ beyond $E$?
                                We are, however, protected from this isuue if we use signed length:
                                that is, we say $CJ$ as positive if it's at ray $DC$ beyond $C$, and negative otherwise.
                                Similarly, we say $EL$ positive if it's at ray $DE$ beyond $E$, and negative otherwise.
                            </p>
                            <p>
                                Now comes the <i>real</i> calculation.
                                First, it's not hard to verify that $CJ>0$ if and only if $\angle BCD>90^{\circ}$,
                                and $|CJ|=BC|\cos BCJ|=BC|\cos\angle C|$, so we have, in fact, $CJ=-BC\cos\angle C$.
                                On the other hand, from $BK\perp DF$ we have $BF^2-BD^2=FK^2-DK^2$.
                                If we follow our signed convention we will also get $EL>0$ iff $K$ is on ray $OE$ beyond $E$ (since $\angle OED=\frac 12 \angle E < 90^{\circ}$).
                                This means $EK>0$ iff $K$ is on ray $OE$ beyond $E$.
                                Therefore (expanding via cosine rule) we have
                                $(BA^2+AF^2-2\cdot BA\cdot AF\cos\angle BAF)-(BC^2+CD^2-2\cdot BC\cdot CD\cos\angle BCD)$
                                <br />
                                $=(EF^2+EK^2-2\cdot EF\cdot EK\cos(180^{\circ}-\angle OEF))-(DE^2+EK^2-2\cdot DE\cdot EK\cos(180^{\circ}-\angle OED))$
                                <br />
                                (we first assume that $K$ is on ray $OE$ beyond $E$ in dealing with this; the negative case is dealt with automatically.
                                That's why we use $180^{\circ}-\angle OEF$ instead of $\angle OEF$.
                                )
                                <br />
                                Now $BA=BC$, $AF=FE$, $CD=DE$, $\angle BAF=\angle BCF$ and $\angle OEF=\angle OED$ so we have
                                $(BA^2+AF^2-2\cdot BA\cdot AF\cos\angle BAF)-(BA^2+CD^2-2\cdot BA\cdot CD\cos\angle BAF)$
                                <br />
                                $=(AF^2+EK^2-2\cdot AF\cdot EK\cos(180^{\circ}-\angle OEF))-(CD^2+EK^2-2\cdot CD\cdot EK\cos(180^{\circ}-\angle OEF))$
                                $$(-2\cdot BA\cdot AF\cos\angle BAF)-(-2\cdot BA\cdot CD\cos\angle BAF)
                                =(-2\cdot AF\cdot EK\cos(180^{\circ}-\angle OEF))-(-2\cdot CD\cdot EK\cos(180^{\circ}-\angle OEF));$$
                                $$2\cdot BA \cos\angle BAF (CD-AF)
                                =2\cdot EK \cos\angle OEF\cdot (AF- CD);$$
                                thus
                                $EK=-BA\frac{\cos\angle BAF}{\cos\angle OEF}$,
                                $EL=EK\cos\angle OEF=-BA\cos\angle BAF=-BC\cos\angle A=-BC\cos\angle C=CJ$. $\blacksquare$
                                (Seriously, G7???)
                                <br />
                                <b>Caveat: </b>we assumed in our solution that $AF\neq CD$ but what if they are equal?
                                In this case $DE=EF$, so it is not hard to prove that $EO$ and $DF$ are perpendicular.
                                Thus the perpendicular from $B$ to $DF$ and $EO$ are either parallel (no intersection) or coincide (infinite intersection).
                                The problem says that there is a unique intersection, $K$, so this edge case can be disregarded.

                            </p>
                        </div>

                        <p>
                            <b>IMO 2009, Problem 4. </b>
                            Let $ ABC$ be a triangle with $ AB = AC$ .
                            The angle bisectors of $ \angle C AB$ and $ \angle AB C$ meet the sides $ B C$ and $ C A$ at $ D$ and $ E$ , respectively.
                            Let $ K$ be the incentre of triangle $ ADC$.
                            Suppose that $ \angle B E K = 45^\circ$ .
                            Find all possible values of $ \angle C AB$ .
                        </p>

                        <button class="button" onclick="hideandshow(imo2009q4, imo2009q4button)" id="imo2009q4button">Show solution</button>
                        <div class="solution" , id="imo2009q4" style="border: 1px solid black; display: none;">
                            <p>
                                This is among the trickiest geometry problem in the recent IMOs.
                                Our trigonometric method wouldn't be easy either, but at least it's safe.
                            </p>

                            <p>
                                Denote the incenter of $\triangle ABC$ as $I$, then $I$ is the intersection of $AD$ and $CK$.
                                By angle bisector theorem + identity on triangle area dissection + sine rule we have:
                                $\frac{\sin\angle ICD}{\sin\angle CID}$
                                $=\frac{ID}{DC}$
                                $=\frac{IK}{KC}$
                                $=\frac{IE\cdot\sin\angle IEK}{CE\sin\angle CEK}$
                                $=\frac{\sin\angle ECI\sin\angle IEK}{\sin\angle EIC\sin\angle CEK}.$
                                Denote $\angle ACB=\angle ABC=a$, then by the assumption that $\angle IEK=45^\circ$ we have
                                $\frac{\sin\frac 12 a}{\cos\frac 12 a}$
                                $=\frac{\sin\frac 12 a\sin 45^{\circ}}{\sin a\sin (135^\circ - \frac 32 a)}$
                                $=\frac{\sin\frac 12 a\sin 45^{\circ}}{2\sin\frac12 a\cos\frac 12 a\sin (45^\circ + \frac 32 a)}$.
                                We can convert this into
                                $\sin 45^\circ=2\sin\frac 12 a\sin(45^\circ + \frac 32 a)$
                                $=2\sin\frac 12 a(\sin 45^\circ\cos \frac 32 a+\cos 45^\circ\sin\frac 32 a)$
                                $=2\sin45^\circ \sin\frac 12 a(\cos \frac 32 a + \sin\frac 32 a)$
                                so $2\sin\frac 12 a(\cos \frac 32 a + \sin\frac 32 a)=1$.
                                Using the fact that $\cos(x+y)=\cos x\cos y-\sin x\sin y$
                                and $\sin (x+y)=\sin x+\cos y+\cos x\sin y$ we have
                                $2\sin\frac 12 a(\cos \frac 12 a\cos a-\sin \frac 12 a\sin a+\cos\frac 12 a\sin a+\sin\frac 12 a\cos a)=1$,
                                using the identity that $2\sin\frac 12 a\cos\frac 12 a=\sin a$ and $2\sin ^2 \frac 12 a=1-\cos a$ we have
                                $\sin a\cos a-(1-\cos a)\sin a+\sin a\sin a+(1-\cos a)\cos a=1$.
                                Subtracting 1 (or $\sin^2 a+\cos ^2 a$) from both sides we have
                                $2\sin a\cos a-\sin a-2\cos ^2 a+\cos a=0$,
                                $(2\cos a -1)(\sin a-\cos a)=0$.
                                This means $\cos a=\frac 12$ (so $a=60^{\circ}$, $\angle BAC=60^\circ$),
                                or $\sin a=\cos a\Rightarrow \tan a=1$ (so $a=45^{\circ}$, $\angle BAC=90^{\circ}$).
                            </p>
                            <p>
                                <b>Note: </b> Many contestants lost marks for missing one of the answers, and not verifying that these two answers work.
                                Verification is less crucial if we approach by algebra as above (since if the equation holds then our answers work) but it's always a good idea.
                            </p>
                        </div>

                        <p>
                            <b>IMOSL 2007, G2.* </b>
                            Given an isosceles triangle $ABC$ with $AB=AC$.
                            The midpoint of side $BC$ is denoted by $M$.
                            Let $X$ be a variable point on the shorter arc $MA$ of the circumcircle of triangle $ABM$.
                            Let $T$ be the point in the angle domain $BMA$, for which $\angle TMX= 90^{\circ}$ and $TX=BX$.
                            Prove that $\angle MTB-\angle CTM$ does not depend on $X$.
                        </p>
                        <button class="button" onclick="hideandshow(isl2007g2, isl2007g2button)" id="isl2007g2button">Show solution</button>
                        <div class="solution" , id="isl2007g2" style="border: 1px solid black; display: none;">
                            <p>
                                The problem is geometry, but the way we approach it is pure algebra (yes, <i>that</i> hardcore).
                            </p>

                            <p>
                                Name $\angle BAM=b$ and $\angle AMX=\angle BMT=x$, assuming $AB=1$,
                                all chords on the circumcircle of $BAM$ is equal to the sine of angle subtended by that chord.
                                Therefore $CM=BM=\sin b$, $TX=BX=\sin (90^{\circ}+x)=\cos x$ and $MX=\sin (180^{\circ}-b-(90^{\circ}+x))=\cos (b+x)$.
                                Now $TM=\sqrt{TX^{2}-MX^{2}}=\sqrt{\cos ^{2}x-\cos ^{2}(b+x)}$
                                $=\sqrt{-\sin (-b)\sin (b+2x)}=\sqrt{\sin b\sin (b+2x)}$.
                            </p>
                            <p>
                                First of all let's prove that $BT\cdot CT=\sin b\sin (2x)$.
                                Observe that: $$BT^{2}=BM^{2}+MT^{2}-2BM\cdot MT\cdot\cos\angle BMT
                                =\sin ^{2} b+\sin b\sin (b+2x)-2\sin b\sqrt{\sin b\sin (b+2x)}\cos x$$
                                while $$CT^{2}=CM^{2}+MT^{2}-2CM\cdot MT\cdot\cos\angle CMT=\sin ^{2} b+\sin b\sin (b+2x)+2\sin b\sqrt{\sin b\sin (b+2x)}\cos x.$$
                                Multiplying the two yields
                                $(\sin ^{2} b+\sin b\sin (b+2x))^{2}-(2\sin b\sqrt{\sin b\sin (b+2x)}\cos x)^{2}$
                                <br />
                                $=\sin ^{4} b+\sin ^{2}b\sin ^{2}(b+2x)+2\sin ^{3} b\sin (b+2x)-4\sin^{3} b\sin (b+2x)\cos ^{2}x$
                                <br />
                                $=\sin ^{2} b (\sin ^{2} b+\sin ^{2}(b+2x)+2\sin b\sin (b+2x)(1-2\cos ^{2}x))$
                                <br />
                                $=\sin ^{2} b (\sin ^{2} b+\sin ^{2}(b+2x)-2\sin b\sin (b+2x)\cos (2x))$
                                <br />
                                because $\cos 2x=\cos^{2} x-1$.
                                Now expand $\sin (b+2x)$, we get $\sin b\cos (2x)+\cos b\sin (2x)$ and
                                $\sin ^{2}(b+2x)=\sin ^{2}b\cos ^{2}(2x)+\cos ^{2}b\sin ^{2}(2x)$+$2\cos b\sin b\cos (2x)\sin (2x)$. The original expression then becomes
                                <br />
                                $\sin^2 {b}(\sin ^{2} b-\sin ^{2}b\cos ^{2}(2x)+\cos^{2}b\sin^{2} (2x))$
                                <br />
                                $=\sin^2 {b}(\sin ^{2} b(1-\cos ^{2}(2x))+\cos^{2}b\sin^{2} (2x))$
                                <br />
                                $=\sin^2 {b}(\sin ^{2} b\sin ^{2}(2x)+\cos^{2}b\sin^{2} (2x))$
                                <br />
                                $=\sin ^{2}b\sin ^{2} (2x)$
                                <br />
                                because $\sin ^{2}a+\cos ^{2}a\equiv 1$ for any $a$.
                            </p>

                            <p>
                                Now $\cos\angle BTM=\frac{BT^{2}+TM^{2}-BM^{2}}{2\cdot BT\cdot TM}$,
                                but since $BT^{2}=BM^{2}+MT^{2}-2BM\cdot MT\cdot\cos\angle BMT$
                                we can write the cosine as $\frac{2TM^{2}-2BM\cdot MT\cos\angle BMT}{2\cdot BT\cdot TM}$
                                $=\frac{TM-BM\cdot\cos\angle BMT}{BT}$
                                $=\frac{TM-\sin b\cos x}{BT}.$
                                Similarly $\cos\angle CTM=\frac{TM+\sin b\cos x}{CT}$.
                                Therefore $\cos\angle BTM\cdot \cos\angle CTM$
                                $=\frac{TM^{2}-\sin ^{2}b\cos ^{2}x}{BT\cdot CT}$
                                $=\frac{\sin b\sin (b+2x)-\sin ^{2}b\cos ^{2}x}{\sin b\sin (2x)}.$
                                Meanwhile, $\sin\angle BTM=\sin\angle TMB\cdot\frac{BM}{TB}$
                                $=\frac{\sin b\sin x}{BT}$ and
                                $\sin\angle CTM=\sin\angle TMC\cdot\frac{CM}{TC}=\frac{\sin b\sin x}{CT}$
                                so $\sin\angle BTM\cdot\sin\angle CTM=\frac{\sin ^{2}b\sin ^{2}x}{BT\cdot CT}=\frac{\sin ^{2}b\sin ^{2}x}{\sin b\sin (2x)}.$ Therefore
                                <br />
                                $\cos (\angle MTB-\angle CTM)$
                                <br />
                                $=\cos\angle BTM\cdot \cos\angle CTM+\sin\angle BTM\cdot\sin\angle CTM$
                                <br />
                                $=\frac{\sin b\sin (b+2x)-\sin ^{2}b\cos ^{2}x}{\sin b\sin (2x)}+\frac{\sin ^{2}b\sin ^{2}x}{\sin b\sin (2x)}$
                                <br />
                                $=\frac{\sin (b+2x)-\sin b\cos ^{2}x+\sin b\sin ^{2}x}{\sin (2x)}$
                                <br />
                                $=\frac{\sin b\cos (2x)+\cos b\sin (2x)-\sin b\cos (2x)}{\sin (2x)}$
                                <br />
                                $=\cos b.$ Independent of $x$ isn't it? In fact it is now evident that the angle difference is indeed $b$. (phew!) $\blacksquare$
                            </p>
                        </div>
                        <br />
                        *These are cited directly from my notes written for the Malaysian IMO training camp in January 2016.
</body>
</html>